<app-nav-bar></app-nav-bar>
<app-partner-side-bar></app-partner-side-bar>
<div class="location-container">
  
  <br>
  <h2>Select Location</h2>

  <div class="form-group">
    <button (click)="getMyCurrentLocation()" [disabled]="showAddressInputField">
      Use My Current Location
    </button>
  </div>

  <div *ngIf="currentLatitude && currentLongitude && !showAddressInputField" class="location-info">
    <!-- <p>Latitude: {{ currentLatitude }}</p>
    <p>Longitude: {{ currentLongitude }}</p> -->
    <p>Current Location Selected</p>
  </div>

  <div class="form-group">
    <button (click)="chooseDifferentLocation()" [disabled]="currentLatitude && currentLongitude">
      Choose Different Location
    </button>
  </div>

  <div *ngIf="showAddressInputField" class="form-group">
    <label for="address-input">Address:</label>
    <input type="text"
           id="address-input"
           class="form-input"
           [(ngModel)]="addressInput"
           (input)="onAddressInputChange(addressInput)"
           placeholder="Start typing a full address...">

    <ul *ngIf="autocompleteSuggestions.length > 0" class="autocomplete-suggestions">
      <li *ngFor="let suggestion of autocompleteSuggestions"
          (click)="onSelectSuggestion(suggestion)">
        {{ suggestion.display_name }}
      </li>
    </ul>

    <p *ngIf="selectedAddressDetails" class="location-info">
      <strong>Selected Address:</strong> {{ selectedAddressDetails.address }}<br>
      <!-- <strong>Latitude:</strong> {{ selectedAddressDetails.latitude }}<br>
      <strong>Longitude:</strong> {{ selectedAddressDetails.longitude }} -->
    </p>
    <p *ngIf="typedLocationErrorMessage" class="error-message">{{ typedLocationErrorMessage }}</p>
  </div>

  <button class="confirm-button"
          (click)="updateLatLon()"
          [disabled]="!(currentLatitude && currentLongitude) && !selectedAddressDetails">
    Confirm Location
  </button>
</div>

