


<app-nav-bar></app-nav-bar>

<div class="admin-dashboard">
  <app-side-bar></app-side-bar>
  <div class="main-content">
    <div class="dashboard-header">
      <h1>Dashboard</h1>
      <p class="subtitle">Welcome to your admin dashboard</p>
    </div>

    <div class="status-row" *ngIf="isLoading">
      <div class="loading">Loading dashboard...</div>
    </div>
    <div class="status-row error" *ngIf="error">{{ error }}</div>

    <div class="stat-grid" *ngIf="!isLoading && !error">
      <!-- Stats cards -->
    <div class="stat-grid" *ngIf="!isLoading && !error">
      <div class="stat-card revenue">
        <div class="stat-left">
          <div class="stat-title">Total Revenue</div>
          <div class="stat-value">
            {{ (dashboard$ | async)?.totalRevenue | currency:'INR':'symbol':'1.2-2' }}
          </div>
        </div>
        <div class="stat-icon">‚Çπ</div>
      </div>

      <div class="stat-card bookings">
        <div class="stat-left">
          <div class="stat-title">Total Bookings</div>
          <div class="stat-value">{{ (dashboard$ | async)?.totalBookings }}</div>
        </div>
        <div class="stat-icon">‚è±Ô∏è</div>
      </div>

      <div class="stat-card partners">
        <div class="stat-left">
          <div class="stat-title">Active Partners</div>
          <div class="stat-value">{{ (dashboard$ | async)?.activePartners }}</div>
        </div>
        <div class="stat-icon">üõ†Ô∏è</div>
      </div>

      <div class="stat-card customers">
        <div class="stat-left">
          <div class="stat-title">Total Customers</div>
          <div class="stat-value">{{ (dashboard$ | async)?.totalCustomers }}</div>
        </div>
        <div class="stat-icon">üë•</div>
      </div>
    </div>
    </div>

    <div class="charts-row" *ngIf="!isLoading && !error">
      
      <!-- Pie Chart -->
      <div class="chart-card">
        <div class="card-header"><h3>Booking Status Distribution</h3></div>
        <div class="card-body">
          <canvas
            *ngIf="pieChartData.datasets[0].data.length"
            baseChart
            [data]="pieChartData"
            [type]="'pie'"
            [options]="pieChartOptions"
            [legend]="pieChartLegend">
          </canvas>
          <div *ngIf="!pieChartData.datasets[0].data.length" class="placeholder-text">
            No booking data available.
          </div>
        </div>
      </div>

      <!-- Line Chart -->
      <div class="chart-card">
        <div class="card-header"><h3>Revenue Trends (Last 8 Weeks)</h3></div>
        <div class="card-body">
          <canvas
            *ngIf="lineChartData.datasets[0].data.length"
            baseChart
            [data]="lineChartData"
            [type]="lineChartType"
            [options]="lineChartOptions"
            [legend]="lineChartLegend">
          </canvas>
          <div *ngIf="!lineChartData.datasets[0].data.length" class="placeholder-text">
            No revenue data available for the last 8 weeks.
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
