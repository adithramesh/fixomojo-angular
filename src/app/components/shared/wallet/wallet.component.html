<app-nav-bar></app-nav-bar>
<div class="admin-dashboard">
  <app-side-bar *ngIf="role === 'admin'"></app-side-bar>
  <app-partner-side-bar *ngIf="role === 'partner'"></app-partner-side-bar>

  <div class="main-content">

    <div class="wallet-container">
      <h2>{{ role | titlecase }} Wallet</h2>

      <!-- Wallet Balance Section -->
      <div class="wallet-balance">
        <p>Balance: <span class="currency-amount">{{ currency }} {{ walletBalance | number:'1.2-2' }}</span></p>
        <button *ngIf="!showRechargeInput && role === 'user'" (click)="toggleRechargeInput()" class="add-money-button">
          Add Money
        </button>
      </div>
      <div *ngIf="showRechargeInput" class="wallet-recharge">
        <input type="number" min="10" [(ngModel)]="amountToAdd" placeholder="Enter amount (â‚¹)" />
        <button (click)="onAddMoney()">Confirm Add</button>
        <button (click)="toggleRechargeInput()" style="background: transparent; border: none; color: gray; margin-top: 0.5rem;">Cancel</button>
      </div>

      <!-- Transaction History Section -->
      <div class="transaction-history">
        <h3>Transactions</h3>
        <div *ngIf="isLoading" class="loading-message">
          <div class="spinner"></div>
          <p>Loading transactions...</p>
        </div>
        <app-data-table
          [tableData]="transactionTableData"
          [tableColumns]="tableColumns"
          [isLoading]="isLoading"
          [emptyMessage]="'No transactions found.'"
          [currentPage]="pagination.page"
          [pageSize]="pagination.pageSize"
          [totalPages]="totalPages"
          [showSearch]="false"
          [searchTerm]="searchTerm"
          (pageChange)="onPageChange($event)"
          (searchChange)="onSearchChange($event)"
        ></app-data-table>
        <p *ngIf="error" class="error-message">{{ error }}</p>
      </div>
    </div>
  </div>
</div>
